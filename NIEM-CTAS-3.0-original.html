<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>NIEM Conformance Targets Attribute Specification, 3.0</title><style type="text/css" media="all">body { font-family: "Times New Roman", Times, serif; background-color: #FFF; color: #000; margin: 3em; } p.todo { color: #000; background-color: #FCC; } a { text-decoration: none; color: #000; background-color: #FFF; } span.issue, span.issue a { color: #000; background-color: #FCC; } a[href]:hover { color: #000; background-color: #F9FAD4; } a.url { font-family: "Courier New", Courier, monospace; font-size: 80%; } a.ref, span.ref { font-weight: bold; } span.termRef::before { content: "·"; } span.termRef::after { content: "·"; } div.img { width: 100%; text-align: center; } img { width: 100%; } div.table { } div.table > table { margin: auto; } div.title { font-size: 200%; font-weight: bold; margin: 1em 5em; text-align: center; } div.subtitle { font-size: 150%; font-weight: bold; margin: 1em 5em; text-align: center; } div.heading { font-size: 125%; font-weight: bold; margin-top: 1em; margin-bottom: 1em; page-break-after: avoid; page-break-inside: avoid; } div.rule-section > div.heading { font-size: 100%; } div.section, div.rule-section { margin-left: 2em; } div.section div.section { margin-left: 0; } div.section div.heading { margin-left: -2em; } div.box { background-color: #EEE; color: #000; border: solid black 1px; padding: 1.0em; } div.box a { background-color: #EEE; color: #000; } div.box a:hover { background-color: #F9FAD4; color: #000; } div.box + div.box, div.figure + div.box { margin-top: 1em; } div.normativeHead { font-weight: bold; margin-bottom: 1em; } dfn { font-style: normal; } div.sub { margin-left: 2em; } div.sub > *:last-child { margin-bottom: 0; } td,th { border: solid black 1px; } th { color: #000; background-color: #EEE; } table { border-collapse: collapse; } code { font-family: "Courier New", Courier, monospace; font-size: 80%; } pre { font-family: "Courier New", Courier, monospace; font-size: 80%; white-space: pre-wrap; margin: 0; } div.caption { font-weight: bold; text-align: center; page-break-after: avoid; page-break-inside: avoid; } p.hang { text-indent: -2em; margin-left: 2em; } q { quotes: '\201C' '\201D' '\2018' '\2019'; } q:before { content: open-quote; } q:after { content: close-quote; } ol ol > li { list-style-type: upper-alpha; }</style></head><body><div class="title">NIEM Conformance Targets Attribute Specification</div><div class="subtitle">Version 3.0</div><div class="subtitle">July 31, 2014</div><div class="subtitle">NIEM Technical Architecture Committee (NTAC)</div><div class="section"><div class="heading"><a name="d3e15"></a>Authors</div><p>Webb Roberts, Georgia Tech Research Institute (<a class="url" target="_blank" href="mailto:webb.roberts@gtri.gatech.edu">&lt;webb.roberts@gtri.gatech.edu&gt;</a>), Lead Author</p></div><div class="section"><div class="heading"><a name="d3e28"></a>Abstract</div><p>This document specifies an XML attribute that may occur within XML documents to establish a claim that the document conforms to a set of conformance targets. This specification does not define what the conformance targets are; the conformance targets are established by other specifications. Each conformance target is identified by an internationalized resource identifier, which is defined by its relevant specification.</p></div><div class="section"><div class="heading"><a name="d3e37"></a>Document Status</div><p>This document is a product of the NIEM Technical Architecture Committee (NTAC). This document is normative.</p></div><div class="section"><div class="heading"><a name="d3e46"></a>Table of Contents</div><ul><li><a href="#section_1">1. Introduction</a><ul><li><a href="#section_1.1">1.1. Background: NIEM 2 Conformant Indicator</a></li><li><a href="#section_1.2">1.2. Goals of This Specification</a></li><li><a href="#section_1.3">1.3. Description of the Conformance Targets Attribute</a></li></ul></li><li><a href="#section_2">2. Document Conventions</a><ul><li><a href="#section_2.1">2.1. RFC 2119 Terminology</a></li><li><a href="#section_2.2">2.2. Use of Namespaces</a></li><li><a href="#section_2.3">2.3. Clark Notation</a></li><li><a href="#section_2.4">2.4. Normative content</a></li></ul></li><li><a href="#section_3">3. Conformance</a><ul><li><a href="#section_3.1">3.1. <em>Conformance Target</em> Defined</a></li><li><a href="#section_3.2">3.2. Conformance to this Specification</a></li><li><a href="#section_3.3">3.3. Syntactic Conformance</a></li></ul></li><li><a href="#section_4">4. Semantics and Use</a><ul><li><a href="#section_4.1">4.1. Suggested Validator Behavior</a></li><li><a href="#section_4.2">4.2. Use of this Specification</a></li></ul></li><li><a href="#appendix_A">Appendix A. References</a></li><li><a href="#appendix_B">Appendix B. XML Schema Document for Conformance Targets Attribute</a></li><li><a href="#appendix_C">Appendix C. Sample XSLT Version 1.0 Implementation</a></li><li><a href="#appendix_D">Appendix D. Sample XSLT Version 2.0 Implementation</a></li><li><a href="#appendix_E">Appendix E. Index of definitions</a></li><li><a href="#appendix_F">Appendix F. Index of rules</a></li></ul></div><div class="section"><div class="heading"><a name="d3e54"></a>Table of Figures</div><ul><li><a href="#figure_1-1">Figure 1-1: Example of NIEM 2 ConformantIndicator</a></li><li><a href="#figure_1-2">Figure 1-2: Example of conformance target attribute in an XML Schema document</a></li><li><a href="#figure_2-1">Figure 2-1: Clark notation for <code>xs:string</code></a></li><li><a href="#figure_4-1">Figure 4-1: XPath 2 expression yielding effective conformance targets attribute</a></li><li><a href="#figure_B-1">Figure B-1: XML Schema Document for Conformance Targets Attribute</a></li><li><a href="#figure_C-1">Figure C-1: Sample XSLT Version 1.0 Implementation</a></li><li><a href="#figure_D-1">Figure D-1: Sample XSLT Version 2.0 Implementation</a></li></ul></div><div class="section"><div class="heading"><a name="section_1"></a>1. Introduction</div><p>The Conformance Targets Attribute Specification defines an attribute that, when it appears in an XML document, claims the document conforms to one or more conformance targets. This pattern and specification was developed to overcome shortcomings in the NIEM 2 <code>ConformantIndicator</code> element, and to provide needed capabilities in future specifications.</p><div class="section"><div class="heading"><a name="section_1.1"></a>1.1. Background: NIEM 2 Conformant Indicator</div><p>Under NIEM 2, a NIEM-conformant XML schema document must indicate that it is a NIEM-conformant schema. This is done through the occurrence of an element within <code>xs:appinfo</code> in the schema:</p><div class="figure"><div class="caption"><a name="figure_1-1"></a>Figure 1-1: Example of NIEM 2 ConformantIndicator</div><div class="box"><pre>&lt;xs:schema [...]&gt;
  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;[...]&lt;/xs:documentation&gt;
    &lt;xs:appinfo&gt;
      &lt;i:ConformantIndicator&gt;true&lt;/i:ConformantIndicator&gt;
    &lt;/xs:appinfo&gt;
  &lt;/xs:annotation&gt;
  [...]
&lt;/xs:schema&gt;</pre></div></div><p>The NIEM 2 conformance indicator is limited:</p><ol><li>The NIEM 2 conformance indicator does not work in documents other than XML Schema documents. It is defined to only apply within a schema document, when the conformant indicator is an appinfo on the document element (root element) of the schema document.</li><li>The NIEM 2 conformance indicator only identifies conformance to a single standard, NIEM 2, as indicated by the namespace in which the <code>appinfo:ConformantIndicator</code> element is defined.</li><li>The NIEM 2 conformance indicator does not explicitly identify a conformance target. It indicates that a schema document claims to be conformant, but does not indicate to which conformance target it conforms.</li></ol></div><div class="section"><div class="heading"><a name="section_1.2"></a>1.2. Goals of This Specification</div><p>The construct specified by this specification has the following goals:</p><ol><li>It supports specifying conformance targets within any XML document, not just XML Schema documents. Any future XML document may be designed to accommodate it.</li><li>It places a minimum of syntactic requirements on an XML document. It does not require a particular document element. It does not require an attribute directly on the document element.</li><li>It does not introduce unnecessary content, including wildcards in a content model.</li><li>It does not introduce dependencies on unnecessary architectural components or schemas.</li><li>It can express a claim to conform to a conformance target defined by a subsequent specification, without modification to this specification.</li><li>Subsequent specifications may explicitly leverage it with minimal effort.</li><li>It does not require any sort of registry or centrally-controlled mechanism.</li><li>It may be used by validation software to identify the correct validation criteria for an XML document.</li><li>It can express claims to multiple conformance targets simultaneously.</li><li>It supports nested documents, each with its own conformance claim, without conflict.</li><li>It may be validated with XML Schema, but does not require its use.</li><li>It may be used with XSLT 1.0 (<a href="#XSLT1" class="ref">[XSLT1]</a>) and XSLT 2.0 (<a href="#XSLT2" class="ref">[XSLT2]</a>) stylesheets.</li></ol></div><div class="section"><div class="heading"><a name="section_1.3"></a>1.3. Description of the Conformance Targets Attribute</div><p>This specification normatively defines a conformance target attribute. An XML document, for example a NIEM XML Schema document, will contain this attribute to indicate to which conformance targets it claims to conform. The attribute is a claim of conformance, and not a statement that should be trusted by a validating system. A validator would use this claim to identify to which conformance rules a document should be validated.</p><p>The attribute's value is a list of internationalized resource identifiers (IRIs). A later specification may define an IRI for its conformance target, and when an XML document has that IRI in its conformance target attribute, the document is claiming to conform to that conformance target.</p><p>Note that all examples within this document, unless explicitly labeled otherwise, are not intended to represent any actual standard, version, conformance target, or identifier. All examples are mock-ups, using familiar terms and subjects, but should not be interpreted to actually represent other specifications or activities.</p><p>As mocked-up example, a specification, <em>NIEM Business Rules Specification, Version 3.0</em> may define a conformance target called a <q>conformant schema document</q>. Note that the conformance target is particular to the specification, and the single version of that specification. In this case, an XML document that conforms to that conformance target would be an XML Schema document that follows the set of rules defined by that specification for that conformance target. Another specification may refer to that conformance target using text similar to the following:</p><blockquote><p>... the document must be a <em>conformant schema document</em>, as defined by the <em>NIEM Business Rules Specification, Version 3.0</em> ...</p></blockquote><p>The <em>NIEM Business Rules Specification, Version 3.0</em> would define an IRI that uniquely identifies that conformance target, for example:</p><blockquote><pre>http://reference.niem.gov/niem/specification/business-rules/3.0/#SchemaDocument</pre></blockquote><p>The IRI identifies an authority, a specification, a particular version of that specification, and a particular conformance target within that version of the specification.</p><p>A schema document could claim to conform to that conformance target by listing the IRI that is the identifier of the business rules <q>conformant schema document</q> conformance target in its first conformance targets attribute, as follows:</p><div class="figure"><div class="caption"><a name="figure_1-2"></a>Figure 1-2: Example of conformance target attribute in an XML Schema document</div><div class="box"><pre>&lt;xs:schema
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:ct="http://release.niem.gov/niem/conformanceTargets/3.0/"
    ct:conformanceTargets="
        http://reference.niem.gov/niem/specification/naming-and-design-rules/3.0/#ReferenceSchemaDocument
        http://reference.niem.gov/niem/specification/business-rules/3.0/#SchemaDocument"
    [...]&gt;
  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;[...]&lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;
  [...]
&lt;/xs:schema&gt;</pre></div></div><p>This example shows two conformance targets (again, this should not be read as reflecting actual standards, conformance targets, or identifiers):</p><ul><li>The first conformance target (<code>...#ReferenceSchemaDocument</code>) establishes a claim that the document conforms to the NIEM NDR, version 3.0's reference schema document conformance target.</li><li>The second conformance target (<code>...#SchemaDocument</code>) establishes a claim that the document conforms to a NIEM business rules specification, version 3.0's schema document conformance target.</li></ul><p>This conformance target claim is just that, a claim. It does not establish conformance, merely hints at it. The conformance claim may be overridden in many ways, such as a well-known root element, doctype, schema, etc. In the above example, the document element <code>xs:schema</code> indicates that the document should be treated as an XML Schema document. The conformance targets attribute indicates conformance targets beyond what is identified by the <code>xs:schema</code> element.</p><p>As another example, a ULEX 1.0 message has a well-known document element, <code>{ulex:message:pd:1.0}doPublish</code>, which indicates a ULEX conformance target and indicates use of ULEX's rules for validation. In addition, a specification that uses ULEX may choose to leverage this conformance targets attribute specification to specify additional conformance targets, by including within a message a <code>ct:conformanceTargets</code> attribute that indicates additional conformance targets.</p><p>In addition, an XML document may have an implied semantic that some specific sub-element (e.g., a ULEX <code>StructuredPayload</code> element) may contain an XML element that is meant to represent a separate XML document. In such a case, the XML fragment may be written out as a separate document, and the first conformance targets attribute within that document will establish a claim to conformance. Validation of such nested documents could be performed by a smart validator, without writing out sub-documents, but specification of that is outside the scope of this specification.</p><p>In any case, the first occurrence in an XML document of the attribute <code>ct:conformanceTargets</code> (in the namespace <code>http://release.niem.gov/niem/conformanceTargets/3.0/</code>) is termed the document's <em>effective conformance targets attribute</em> (see <a href="#definition_effective_conformance_targets_attribute"><strong>[Definition: effective conformance targets attribute]</strong></a>). The IRIs carried within that attribute are the document's <em>effective conformance target identifier</em>s (see <a href="#definition_effective_conformance_target_identifier"><strong>[Definition: effective conformance target identifier]</strong></a>). Each of these identifiers is an IRI that indicates a conformance target to which the document may conform. </p><p>While this mechanism is available to specifications as a means of expressing a document's claim to conform, different specifications and document types may have different ways of specifying conformance. For example, the MPD catalog may use the attribute to express conformance of the catalog itself, while defining a separate mechanism to indicate the conformants of a set of documents, since a set is not itself an XML document.</p><p>This specification does not establish a requirement that any document use the conformance attribute to identify its conformance targets. The authors of subsequent specifications should make explicit whether the conformance attribute is a required mechanism for labeling conformance, or if it merely is used as an optional hint.</p></div></div><div class="section"><div class="heading"><a name="section_2"></a>2. Document Conventions</div><p>This document uses formatting and syntactic conventions to clarify meaning and to avoid ambiguity.</p><div class="section"><div class="heading"><a name="section_2.1"></a>2.1. RFC 2119 Terminology</div><p>Within normative content (rules and definitions), the key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in <a href="#RFC2119" class="ref">[RFC2119]</a>.</p></div><div class="section"><div class="heading"><a name="section_2.2"></a>2.2. Use of Namespaces</div><p>The following namespaces are used consistently within this document:</p><ul><li>The namespace prefix <code>xs</code> is bound to the namespace URI reference <code>http://www.w3.org/2001/XMLSchema</code>.</li><li>The namespace prefix <code>ct</code> is bound to the namespace URI reference <code>http://release.niem.gov/niem/conformanceTargets/3.0/</code>.</li></ul><p>The use of namespace prefixes and prefix-qualified names within this specification does not constitute a requirement for any artifact to use any specific namespace prefix. Namespace prefixes are immaterial to conformance to this specification.</p></div><div class="section"><div class="heading"><a name="section_2.3"></a>2.3. Clark Notation</div><p>This document uses Clark notation to represent qualified names in normative text. Clark notation is described by <a href="#ClarkNS" class="ref">[ClarkNS]</a>, and provides the information in an XML qualified name (as defined by <a href="#XMLNamespaces" class="ref">[XMLNamespaces]</a>) without the need to define a namespace prefix and then reference that namespace prefix. A Clark notation value looks like the following: </p><div class="figure"><div class="caption"><a name="figure_2-1"></a>Figure 2-1: Clark notation for <code>xs:string</code></div><div class="box"><pre>{http://www.w3.org/2001/XMLSchema}string</pre></div></div><p>Each Clark notation value consists of a namespace URI surrounded by curly braces, concatenated with a local name. Such a namespace/local name pair may be expressed in XML using a namespace prefix, or a default namespace binding, as specified in the <a href="#XMLNamespaces" class="ref">[XMLNamespaces]</a>.</p></div><div class="section"><div class="heading"><a name="section_2.4"></a>2.4. Normative content</div><p>This document contains text that is normative, and text that is informative. This section describes the normative forms.</p><p>A definition defines a term that is used within rules.</p><div class="box"><div class="normativeHead"><a name="d3e415"></a>[Definition: &lt;term&gt;]</div><div class="sub"><p>A formal definition of a term used within the document.</p></div></div><p>A rule states a specific requirement on a conformance target. The conformance target is explicitly identified in the text of the rule. A rule uses terminology from <a href="#RFC2119" class="ref">[RFC2119]</a> to establish requirements. Rules are normative.</p><div class="box"><div class="normativeHead">[Rule &lt;section&gt;-&lt;number&gt;]</div><div class="sub"><p>An enforceable rule.</p></div></div></div></div><div class="section"><div class="heading"><a name="section_3"></a>3. Conformance</div><div class="section"><div class="heading"><a name="section_3.1"></a>3.1. <em>Conformance Target</em> Defined</div><p>This document uses the term <em>conformance target</em> in a normative way:</p><div class="box"><div class="normativeHead"><a name="definition_conformance_target"></a>[Definition: <dfn>conformance target</dfn>]</div><div class="sub"><p>A <em>conformance target</em> is a class of artifact, such as an interface, protocol, document, platform, process or service, that is the subject of conformance clauses and normative statements. There may be several conformance targets defined within a specification, and these targets may be diverse so as to reflect different aspects of a specification. For example, a protocol message and a protocol engine may be different conformance targets.</p></div></div><p>The above definition of <em>conformance target</em> is adapted from <a href="#OASISConformance" class="ref">[OASISConformance]</a>. This definition is overly broad for the purposes of this specification, as this specification is concerned only with conformance targets that are XML documents.</p><div class="box"><div class="normativeHead"><a name="definition_conformance_target_identifier"></a>[Definition: <dfn>conformance target identifier</dfn>]</div><div class="sub"><p>A <em>conformance target identifier</em> is an internationalized resource identifier that uniquely identifies a conformance target.</p></div></div><p>The term <em>internationlized resource identifier</em> (IRI) is defined by <a href="#RFC3987" class="ref">[RFC3987]</a>. The RFC also defines comparison of IRIs.</p></div><div class="section"><div class="heading"><a name="section_3.2"></a>3.2. Conformance to this Specification</div><p>This specification defines a single conformance target, normatively referred to within this document as a <em>conformant document</em>.</p><div class="box"><div class="normativeHead"><a name="definition_conformant_document"></a>[Definition: <dfn>conformant document</dfn>]</div><div class="sub"><p>A <em>conformant document</em> is a document that uses the conformance targets attribute defined by this specification to express a claim that it conforms to specific conformance targets. A conformant document MUST satisfy all rules in this specification for conformant documents.</p></div></div><p>For an example of the use of this term in another specification, see <a href="#section_4.2">Section 4.2, <em>Use of this Specification</em>, below</a>.</p></div><div class="section"><div class="heading"><a name="section_3.3"></a>3.3. Syntactic Conformance</div><div class="rule-section"><div class="heading"><a name="rule_3-1"></a>Rule 3-1. Conformant document is an XML document</div><div class="box"><div class="normativeHead">[Rule 3-1]</div><p>A conformant document MUST be an XML document.</p></div></div><p>The term <em>XML document</em> is defined by <a href="#XML" class="ref">[XML]</a>.</p><div class="rule-section"><div class="heading"><a name="rule_3-2"></a>Rule 3-2. Attribute <code>ct:conformanceTargets</code> is valid</div><div class="box"><div class="normativeHead">[Rule 3-2]</div><p>Within a conformant document, every occurrence of the attribute <code>{http://release.niem.gov/niem/conformanceTargets/3.0/}conformanceTargets</code> MUST be locally schema-valid to the XML Schema component definition contained in <a href="#figure_B-1">Figure B-1, <em>XML Schema Document for Conformance Targets Attribute</em></a>.</p></div></div><p>The schema-validity of an attribute is defined by <a href="#XMLSCHEMA1" class="ref">[XMLSchema1]</a>. This specification does not require that the validity of a conformant artifact actually be assesed, only that the occurrences of the attribute satisfy the constraints embodied in the schema document.</p><p>This specification does not require any specific system or exchange specification to use this particular schema document. A system or exchange specification may use or incorporate a schema for this namespace that adds or removes annotations or modifies other characteristics of the schema, for example to make the schema document conformant to some specification.</p><div class="rule-section"><div class="heading"><a name="no-ct-el"></a><a name="rule_3-3"></a>Rule 3-3. Namespace defines only attribute <code>ct:conformanceTargets</code></div><div class="box"><div class="normativeHead">[Rule 3-3]</div><p>A conformant document MUST NOT contain any element or attribute information item that has the namespace name <code>http://release.niem.gov/niem/conformanceTargets/3.0/</code>, other than attribute <code>{http://release.niem.gov/niem/conformanceTargets/3.0/}conformanceTargets</code>.</p></div></div><div class="rule-section"><div class="heading"><a name="no-xsi-type"></a><a name="rule_3-4"></a>Rule 3-4. No reference to types in conformance targets namespace</div><div class="box"><div class="normativeHead">[Rule 3-4]</div><p>A conformant document MUST NOT contain an attribute <code>{http://www.w3.org/2001/XMLSchema-instance}type</code> with a value that has a namespace name of <code>http://release.niem.gov/niem/conformanceTargets/3.0/</code>.</p></div></div><p><a href="#rule_3-3">Rule 3-3, <em>Namespace defines only attribute <code>ct:conformanceTargets</code></em>, above,</a> and <a href="#rule_3-4">Rule 3-4, <em>No reference to types in conformance targets namespace</em>, above,</a> defend against abuse of the conformance targets attribute namespace, ensuring that any document that implies that there are additional schema components defined in the conformance targets attribute namespace is not conformant.</p><div class="rule-section"><div class="heading"><a name="rule_3-5"></a>Rule 3-5. Attribute <code>ct:conformanceTargets</code> contains only absolute IRI references</div><div class="box"><div class="normativeHead">[Rule 3-5]</div><p>Within a conformant document, each item in the value of an attribute <code>{http://release.niem.gov/niem/conformanceTargets/3.0/}conformanceTargets</code> MUST be an absolute IRI reference.</p></div></div><p>The definition of an absolute IRI reference is defined by <a href="#RFC3987" class="ref">[RFC3987]</a>.</p><div class="rule-section"><div class="heading"><a name="rule_3-6"></a>Rule 3-6. Document may contain any number of <code>ct:conformanceTargets</code> attributes</div><div class="box"><div class="normativeHead">[Rule 3-6]</div><p>A conformant document MAY include any number of occurrences of the attribute <code>{http://release.niem.gov/niem/conformanceTargets/3.0/}conformanceTargets</code>.</p></div></div><p>This specification does not restrict the number of occurrences of the conformance targets attribute. If a document has no occurences of the conformance targets attribute, or if the effective conformance target attribute contains no items, then the document does not claim to conform to any conformance targets via the mechanisms of this specification. If there are multiple occurrences of the conformance targets attribute, only one is effective for the document.</p></div></div><div class="section"><div class="heading"><a name="section_4"></a>4. Semantics and Use</div><p>This section defines the meaning of the constructs, and provides text for other specifications to leverage the Conformance Targets Attribute Specification.</p><div class="box"><div class="normativeHead"><a name="definition_effective_conformance_targets_attribute"></a>[Definition: <dfn>effective conformance targets attribute</dfn>]</div><div class="sub"><p>The <em>effective conformance targets attribute</em> of a conformant document is the first occurrence of the attribute <code>{http://release.niem.gov/niem/conformanceTargets/3.0/}conformanceTargets</code>, in document order.</p></div></div><p>The term <em>document order</em> is defined by <a href="#XPathDM" class="ref">[XPathDM]</a>. A suggested XPath 2 expression for the effective conformance targets attribute follows. It is not normative.</p><div class="figure"><div class="caption"><a name="figure_4-1"></a>Figure 4-1: XPath 2 expression yielding effective conformance targets attribute</div><div class="box"><pre>(//@*:conformanceTargets[
  namespace-uri() = 'http://release.niem.gov/niem/conformanceTargets/3.0/'
])[1] </pre></div></div><p>An IRI reference that occurs within the effective conformance targets attribute estabishes a claim to conform to some conformance target. Each conformance target attribute may make any number of claims. Each such claim may be testable by validation software or by human review to verify or falsify the claim that it conforms. Each such identifier is an <em>effective conformance target identifier</em>. Validation of a claim to conform to a conformance target is outside the scope of this specification.</p><div class="box"><div class="normativeHead"><a name="definition_effective_conformance_target_identifier"></a>[Definition: <dfn>effective conformance target identifier</dfn>]</div><div class="sub"><p>An <em>effective conformance target identifier</em> of a conformant document is an internationalized resource identifier reference that occurs in the document's effective conformance targets attribute.</p></div></div><p>It is expected (but not required) that each effective conformance target identifier will be an IRI that is defined by some specification to represent a conformance target.</p><div class="section"><div class="heading"><a name="section_4.1"></a>4.1. Suggested Validator Behavior</div><p>This section includes a non-normative description of the way the constructs defined by this specification are intended to work. This section is not normative.</p><p>A validator should use the effective conformance target identifiers of a conformant document as hints indicating possible intended conformance targets for the document. </p><p>A validator should not identify claimed conformance targets using occurrences of the conformance targets attribute other than the effective conformance targets attribute. Only the first occurrence of the conformance targets attribute, in document order, establishes a claim to conformance.</p><p>A validator should limit validation to known conformance target identifiers. It should ignore unknown identifiers.</p><p>A validator should not treat the order the order of conformance target identifiers within the effective conformance targets attribute as significant. The contents of a conformance targets attribute should be treated as a set, rather than an ordered list.</p></div><div class="section"><div class="heading"><a name="section-use"></a><a name="section_4.2"></a>4.2. Use of this Specification</div><p>The following should be true for a specification that leverages this specification:</p><ol><li>The specification defines explicit conformance targets.</li><li>Normative statements made by the specification are prescriptive requirements on those conformance targets.</li><li>Each conformance target that is an XML document, and for which the Conformance Targets Attribute Specification will be leveraged, is assigned a conformance target identifier by the specification. Each such identifier is an IRI, and is unique to the specification, version, and conformance target.</li><li><p>For the conformance target with the name <code>$conformance-target-name</code> and the conformance target identifier <code>$conformance-target-identifier</code>, the specification includes normative text similar to the following:</p><blockquote><p>A <code>$conformance-target-name</code> MUST be a <em>conformant document</em> as defined by the <em>NIEM Conformance Targets Attribute Specification</em> Version 3.0, and MUST have an <em>effective conformance target identifer</em> of <code>$conformance-target-identifier</code>.</p></blockquote><p>A specification that uses the conformance targets attribute as an optional hint would replace the word MUST in the above rule with the word MAY or SHOULD, as appropriate for the level of requirement desired.</p></li></ol></div></div><div class="section"><div class="heading"><a name="appendix_A"></a>Appendix A. References</div><p class="hang"><a name="ClarkNS"></a><span class="ref">[ClarkNS]</span>: Clark, J. (1999, February 4). <em>XML Namespaces</em>. Retrieved June 21, 2012, from <a class="url" target="_blank" href="http://www.jclark.com/xml/xmlns.htm">http://www.jclark.com/xml/xmlns.htm</a></p><div class="sub"></div><p class="hang"><a name="OASISConformance"></a><span class="ref">[OASISConformance]</span>: <em>Guidelines to Writing Conformance Clauses</em>. (2007, September 4). <em>OASIS Technical Committee Handbook</em>. Retrieved June 15, 2012, from <a class="url" target="_blank" href="http://docs.oasis-open.org/templates/TCHandbook/ConformanceGuidelines.html#_Toc170119661">http://docs.oasis-open.org/templates/TCHandbook/ConformanceGuidelines.html</a></p><div class="sub"></div><p class="hang"><a name="RFC2119"></a><span class="ref">[RFC2119]</span>: Bradner, S. (1997, March). <em>Key words for use in RFCs to Indicate Requirement Levels</em>. Internet Engineering Task Force. Retrieved from <a class="url" target="_blank" href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a></p><div class="sub"></div><p class="hang"><a name="RFC3987"></a><span class="ref">[RFC3987]</span>: Duerst, M., &amp; Suignard, M. (2005, January). <em>Internationalized Resource Identifiers (IRIs), RFC 3987</em>. Retrieved June 21, 2012, from <a class="url" target="_blank" href="http://www.ietf.org/rfc/rfc3987">http://www.ietf.org/rfc/rfc3987</a></p><div class="sub"></div><p class="hang"><a name="XML"></a><span class="ref">[XML]</span>: Bray, T., Paoli, J., Sperberg-McQueen, C. M., Maler, E., &amp; Yergeau, F. (2008, November 26). <em>Extensible Markup Language (XML) 1.0 (Fifth Edition)</em>. The World Wide Web Consortium (W3C). Retrieved from <a class="url" target="_blank" href="http://www.w3.org/TR/xml/">http://www.w3.org/TR/xml/</a></p><div class="sub"></div><p class="hang"><a name="XMLSCHEMA1"></a><span class="ref">[XMLSchema1]</span>: Thompson, H. S., Beech, D., Maloney, M., &amp; Mendelsohn, N. (2004, October 28). <em>XML Schema Part 1: Structures Second Edition</em>. Retrieved from <a class="url" target="_blank" href="http://www.w3.org/TR/xmlschema-1/">http://www.w3.org/TR/xmlschema-1/</a>.</p><div class="sub"></div><p class="hang"><a name="XMLNamespaces"></a><span class="ref">[XMLNamespaces]</span>: Bray, T., Hollander, D., Layman, A., Tobin, R., &amp; Thompson, H. S. (2009, December 8). <em>Namespaces in XML 1.0 (Third Edition)</em>. W3C. Retrieved from <a class="url" target="_blank" href="http://www.w3.org/TR/2009/REC-xml-names-20091208/">http://www.w3.org/TR/2009/REC-xml-names-20091208/</a></p><div class="sub"></div><p class="hang"><a name="XPathDM"></a><span class="ref">[XPathDM]</span>: Berglund, A., Fernández, M. F., Malhotra, A., Marsh, J., Nagy, M., &amp; Walsh, N. (2010, December 14). <em>XQuery 1.0 and XPath 2.0 Data Model (XDM) (Second Edition)</em>. Retrieved June 21, 2012, from <a class="url" target="_blank" href="http://www.w3.org/TR/xpath-datamodel/">http://www.w3.org/TR/xpath-datamodel/</a></p><div class="sub"></div><p class="hang"><a name="XSLT1"></a><span class="ref">[XSLT1]</span>: Clark, J. (1999, November 16). <em>XSL Transformations (XSLT) Version 1.0</em>. W3C. Retrieved from <a class="url" target="_blank" href="http://www.w3.org/TR/xslt">http://www.w3.org/TR/xslt</a></p><div class="sub"></div><p class="hang"><a name="XSLT2"></a><span class="ref">[XSLT2]</span>: Kay, M. (2007, January 23). <em>XSL Transformations (XSLT) Version 2.0</em>. W3C. Retrieved from <a class="url" target="_blank" href="http://www.w3.org/TR/2007/REC-xslt20-20070123/">http://www.w3.org/TR/2007/REC-xslt20-20070123/</a></p><div class="sub"></div></div><div class="section"><div class="heading"><a name="appendix_B"></a>Appendix B. XML Schema Document for Conformance Targets Attribute</div><div class="figure"><div class="caption"><a name="figure_B-1"></a>Figure B-1: XML Schema Document for Conformance Targets Attribute</div><div class="box"><pre>&lt;?xml version="1.0" encoding="US-ASCII"?&gt;
&lt;xs:schema
    targetNamespace="http://release.niem.gov/niem/conformanceTargets/3.0/"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;

  &lt;xs:attribute name="conformanceTargets"&gt;
    &lt;xs:simpleType&gt;
      &lt;xs:list itemType="xs:anyURI"/&gt;
    &lt;/xs:simpleType&gt;
  &lt;/xs:attribute&gt;

&lt;/xs:schema&gt;
</pre></div></div></div><div class="section"><div class="heading"><a name="appendix_C"></a>Appendix C. Sample XSLT Version 1.0 Implementation</div><p>The following is a sample implementation of XSLT version 1.0 (<a href="#XSLT1" class="ref">[XSLT1]</a>) templates that interact with the conformance targets attribute. This section is not normative. The key templates are:</p><ul><li><code>ctu:get-effective-conformance-targets</code>: Yields the effective conformance targets for the current XML document.</li><li><code>ctu:conformance-targets-contains</code>: Indicates if the list of conformance targets (passed in as a parameter) contains a specific conformance target IRI.</li></ul><div class="figure"><div class="caption"><a name="figure_C-1"></a>Figure C-1: Sample XSLT Version 1.0 Implementation</div><div class="box"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;stylesheet 
    xmlns="http://www.w3.org/1999/XSL/Transform" 
    xmlns:ctu="http://example.org/conformance-targets-utilities/xslt1/"
    version="1.0"&gt;

  &lt;!-- 
    Sample use:
      &lt;xsl:call-template name="ctu:get-effective-conformance-targets"/&gt;
    This template yields the effective conformance targets value for the current XML document.
  --&gt;
  &lt;template name="ctu:get-effective-conformance-targets"&gt;
    &lt;value-of select="(//@*[
      namespace-uri() = 'http://release.niem.gov/niem/conformanceTargets/3.0/'
      and local-name() = 'conformanceTargets'
    ])[1]"/&gt;
  &lt;/template&gt;

  &lt;!--
    Sample use:

      &lt;xsl:call-template name="ctu:conformance-targets-contains"&gt;
        &lt;with-param name="conformance-targets" 
                    select="/xs:schema/@ct:conformanceTargets"/&gt;
        &lt;with-param name="iri"
         &gt;http://example.org/specification/version/#ConformanceTarget&lt;/with-param&gt;
      &lt;/xsl:call-template&gt;

      Yields 'true' if the iri appears in the list of conformance targets.
      Yields 'false' otherwise.
  --&gt;
  &lt;template name="ctu:conformance-targets-contains"&gt;
    &lt;param name="conformance-targets"/&gt;
    &lt;param name="iri"/&gt;

    &lt;call-template name="ctu:list-contains"&gt;
      &lt;with-param name="list" select="$conformance-targets"/&gt;
      &lt;with-param name="member" select="$iri"/&gt;
    &lt;/call-template&gt;
  &lt;/template&gt;

  &lt;!--
      list operations: 
        list is empty: string-length(normalize-space($list)) = 0
  --&gt;

  &lt;!-- Yields the first member of a list. --&gt;
  &lt;template name="ctu:list-get-first"&gt;
    &lt;param name="list"/&gt;
    &lt;param name="ns-list" select="normalize-space($list)"/&gt;
    &lt;choose&gt;
      &lt;when test="string-length($ns-list) = 0"&gt;
        &lt;message terminate="yes"&gt;ERROR in template &lt;!--
        --&gt;{http://example.org/conformance-targets-utilities/xslt1/}get-first-from-list: &lt;!--
        --&gt;You can't get the first entry of an empty list.&lt;/message&gt;
      &lt;/when&gt;
      &lt;when test="contains($ns-list, ' ')"&gt;
        &lt;value-of select="substring-before($ns-list, ' ')"/&gt;
      &lt;/when&gt;
      &lt;otherwise&gt;
        &lt;value-of select="$ns-list"/&gt;
      &lt;/otherwise&gt;
    &lt;/choose&gt;
  &lt;/template&gt;

  &lt;!-- Yields evertyhing after the first member of a list. --&gt;
  &lt;template name="ctu:list-get-rest"&gt;
    &lt;param name="list"/&gt;
    &lt;param name="ns-list" select="normalize-space($list)"/&gt;
    &lt;choose&gt;
      &lt;when test="string-length($ns-list) = 0"&gt;
        &lt;message terminate="yes"&gt;ERROR in template &lt;!--
        --&gt;{http://example.org/conformance-targets-utilities/xslt1/}get-first-from-list: &lt;!--
        --&gt;You can't get the rest of an empty list.&lt;/message&gt;
      &lt;/when&gt;
      &lt;when test="contains($ns-list, ' ')"&gt;
        &lt;value-of select="substring-after($ns-list, ' ')"/&gt;
      &lt;/when&gt;
      &lt;!-- otherwise yield nothing --&gt;
    &lt;/choose&gt;
  &lt;/template&gt;

  &lt;!-- Yields true iff the list contains the member. --&gt;
  &lt;template name="ctu:list-contains"&gt;
    &lt;param name="list"/&gt;
    &lt;param name="member"/&gt;
    &lt;choose&gt;
      &lt;when test="string-length(normalize-space($list)) = 0"&gt;
        &lt;value-of select="false()"/&gt;
      &lt;/when&gt;
      &lt;otherwise&gt;
        &lt;variable name="first"&gt;
          &lt;call-template name="ctu:list-get-first"&gt;
            &lt;with-param name="list" select="$list"/&gt;
          &lt;/call-template&gt;
        &lt;/variable&gt;
        &lt;choose&gt;
          &lt;when test="$first = $member"&gt;
            &lt;value-of select="true()"/&gt;
          &lt;/when&gt;
          &lt;otherwise&gt;
            &lt;variable name="rest"&gt;
              &lt;call-template name="ctu:list-get-rest"&gt;
                &lt;with-param name="list" select="$list"/&gt;
              &lt;/call-template&gt;
            &lt;/variable&gt;
            &lt;choose&gt;
              &lt;when test="string-length($rest) = 0"&gt;
                &lt;value-of select="false()"/&gt;
              &lt;/when&gt;
              &lt;otherwise&gt;
                &lt;call-template name="ctu:list-contains"&gt;
                  &lt;with-param name="list" select="$rest"/&gt;
                  &lt;with-param name="member" select="$member"/&gt;
                &lt;/call-template&gt;
              &lt;/otherwise&gt;
            &lt;/choose&gt;
          &lt;/otherwise&gt;
        &lt;/choose&gt;
      &lt;/otherwise&gt;
    &lt;/choose&gt;
  &lt;/template&gt;

&lt;/stylesheet&gt;
</pre></div></div></div><div class="section"><div class="heading"><a name="appendix_D"></a>Appendix D. Sample XSLT Version 2.0 Implementation</div><p>The following is a sample implementation of XSLT version 2.0 (<a href="#XSLT2" class="ref">[XSLT2]</a>) functions that interact with the conformance targets attribute. This section is not normative. The key functions are:</p><ul><li><code>ctu:get-effective-conformance-targets($node as node()) as xs:anyURI*</code>: Yields the effective conformance targets for the XML document containing the given node.</li><li><code>ctu:conformance-targets-contains($conformance-targets as xs:anyURI*, $iri as xs:anyURI) as xs:boolean</code>: Indicates if the given sequence of conformance targets contains the given IRI.</li></ul><div class="figure"><div class="caption"><a name="figure_D-1"></a>Figure D-1: Sample XSLT Version 2.0 Implementation</div><div class="box"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;stylesheet 
    xmlns="http://www.w3.org/1999/XSL/Transform" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:ctu="http://example.org/conformance-targets-utilities/xslt2/"
    version="2.0"&gt;

  &lt;!-- 
    Sample use:
       &lt;xsl:sequence select="
         ctu:get-effective-conformance-targets(/)
       "/&gt;
    This function yields the effective conformance targets value for XML document. 
  --&gt;
  &lt;function name="ctu:get-effective-conformance-targets" as="xs:anyURI*"&gt;
    &lt;param name="node" as="node()"/&gt;
    &lt;sequence select="for $string in tokenize(normalize-space(
      (root($node)//@*[
         namespace-uri() = 'http://release.niem.gov/niem/conformanceTargets/3.0/'
         and local-name() = 'conformanceTargets'
      ])[1]), ' ') return xs:anyURI($string)"/&gt;
  &lt;/function&gt;

  &lt;!--
      Sample use:
          &lt;xsl:if test="
            ctu:conformance-targets-contains(
              ctu:get-effective-conformance-targets(/), 
              xs:anyURI('http://example.org/specification/version/#ConformanceTarget')
            )"&gt;
      This function yields true if and only if the list of conformance targets contains the given iri.
  --&gt;
  &lt;function name="ctu:conformance-targets-contains" as="xs:boolean"&gt;
    &lt;param name="conformance-targets" as="xs:anyURI*"/&gt;
    &lt;param name="iri" as="xs:anyURI"/&gt;

    &lt;sequence select="$iri = $conformance-targets"/&gt;
  &lt;/function&gt;

&lt;/stylesheet&gt;
</pre></div></div></div><div class="section"><div class="heading"><a name="index-of-defns"></a><a name="appendix_E"></a>Appendix E. Index of definitions</div><ul><li><a href="#definition_conformance_target">conformance target</a>: <a href="#section_3.1">Section 3.1, <em><em>Conformance Target</em> Defined</em></a></li><li><a href="#definition_conformance_target_identifier">conformance target identifier</a>: <a href="#section_3.1">Section 3.1, <em><em>Conformance Target</em> Defined</em></a></li><li><a href="#definition_conformant_document">conformant document</a>: <a href="#section_3.2">Section 3.2, <em>Conformance to this Specification</em></a></li><li><a href="#definition_effective_conformance_target_identifier">effective conformance target identifier</a>: <a href="#section_4">Section 4, <em>Semantics and Use</em></a></li><li><a href="#definition_effective_conformance_targets_attribute">effective conformance targets attribute</a>: <a href="#section_4">Section 4, <em>Semantics and Use</em></a></li></ul></div><div class="section"><div class="heading"><a name="index-of-rules"></a><a name="appendix_F"></a>Appendix F. Index of rules</div><ul><li><a href="#rule_3-1">Rule 3-1, <em>Conformant document is an XML document</em></a>: <a href="#section_3.3">Section 3.3, <em>Syntactic Conformance</em></a></li><li><a href="#rule_3-2">Rule 3-2, <em>Attribute <code>ct:conformanceTargets</code> is valid</em></a>: <a href="#section_3.3">Section 3.3, <em>Syntactic Conformance</em></a></li><li><a href="#rule_3-3">Rule 3-3, <em>Namespace defines only attribute <code>ct:conformanceTargets</code></em></a>: <a href="#section_3.3">Section 3.3, <em>Syntactic Conformance</em></a></li><li><a href="#rule_3-4">Rule 3-4, <em>No reference to types in conformance targets namespace</em></a>: <a href="#section_3.3">Section 3.3, <em>Syntactic Conformance</em></a></li><li><a href="#rule_3-5">Rule 3-5, <em>Attribute <code>ct:conformanceTargets</code> contains only absolute IRI references</em></a>: <a href="#section_3.3">Section 3.3, <em>Syntactic Conformance</em></a></li><li><a href="#rule_3-6">Rule 3-6, <em>Document may contain any number of <code>ct:conformanceTargets</code> attributes</em></a>: <a href="#section_3.3">Section 3.3, <em>Syntactic Conformance</em></a></li></ul></div></body></html>
